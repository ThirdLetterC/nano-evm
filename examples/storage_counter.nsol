contract StorageCounter {
    function main() {
        // Storage layout:
        // slot 0: persistent counter value
        //
        // Behavior:
        // 1) read current value
        // 2) increment and write back
        // 3) return updated value
        uint current = sload(0);
        uint next = current + 1;
        sstore(0, next);
        return next;
    }
}
